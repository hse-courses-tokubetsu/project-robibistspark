[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg)](https://classroom.github.com/a/iHpKfUUO)

### Структура репозитория
1) Файл hw2+project.ipynb, в котором написаны комментарии к коду пошагово и показано, как получаются индексы (в программе они только загружаются)
2) Файл запуска консольной программы main.py, принимающий запрос с аргументами
3) Файл страниц веб-приложения app.py
4) Модуль main_web.py, обрабатывающий запрос с сайта
5) Модули search.py (индексация запроса и ранжирование документов по релевантности) и load_indeces.py (загрузка индексов в память, к которым обращаются файлы обработки запроса от пользователя
6) Вспомогательные модули preprocess_text.py (лемматизация, PoS-тэгинг) и delete_OOVs.py (удалить слова, если их нет в словаре векторной модели), к которым обращается модуль search.py
7) Четыре индекса и корпус в виде .pickle файлов
8) Корпус я здесь не дублирую, он доступен по адресу: http://www.labinform.ru/pub/named_entities/collection5.zip

### Метрики
| Index type    | Average time, ms  | Memory, bytes |
|:-------------:|:----------------- |:------------- |
| BM-25         | 10.4              | 608164        |
| Word2Vec      | 22.7              | 2400128       |
| Navec         | 23.3              | 2400128       |
| BERT          | 327               | 8192128       |

### Использование
## Консольная программа
Для работы консольной программы необходимо иметь используемые ей модели Word2Vec и Navec, они доступны для скачивания по адресу http://vectors.nlpl.eu/repository/20/220.zip и https://storage.yandexcloud.net/natasha-navec/packs/navec_news_v1_1B_250K_300d_100q.tar соответственно. 
Пользователь располагает в пути модули main, preprocess_text, delete_OOVs, load_index и search, а также корпус и индексы в .pickle. Затем ему достаточно обратиться к файлу main.py и ввести аргументы запроса, чтобы программа вывела список ранжированных по релевантности запросу документов и время выполнения запроса. (CLI самый примитивный, и есть проблема, что не парсятся запросы длиной больше одного слова.)
## Веб-приложение
Для работы с сайтом нужно его захостить. Для этого нужно запустить приложение app.py (пререквизиты те же, что выше, кромме того, что вместо main.py нужно иметь main_web.py) и зайти на сайт. Там перейти на страницу поиска, заполнить поля, отправить запрос. (Так как приложение использует большие модели, на PAW я его не разместил.)

### Аргументы
query (str) - текст запроса

index_type (str) - нужный тип индекса: 'bm25', 'w2v', 'navec' или 'bert'

n (int) - количество документов, которое нужно отобразить, по умлочанию 2

### Пример
```
python main.py телефон bm25 2
```
